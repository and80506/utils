{"version":3,"file":"utils.js","sources":["../../src/device.ts","../../node_modules/tslib/tslib.es6.js","../../src/util.ts","../../src/constants.ts","../../src/dom.ts","../../src/http.ts"],"sourcesContent":["export function getUserAgent() {\n    return window.navigator.userAgent;\n}\nexport function isDevice(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    if (ua.match(/Android|webOS|iPhone|iPad|iPod|bada|Symbian|Palm|CriOS|BlackBerry|IEMobile|WindowsMobile|Opera Mini/i)) {\n        return true;\n    }\n    return false;\n}\nexport function isWebView() {\n    var userAgent = window.navigator.userAgent;\n    return (/(iPhone|iPod|iPad|Macintosh).*AppleWebKit(?!.*Safari)/i.test(userAgent) ||\n        /\\bwv\\b/.test(userAgent) ||\n        /Android.*Version\\/(\\d)\\.(\\d)/i.test(userAgent));\n}\nexport function isOperaMini(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    return ua.indexOf('Opera Mini') > -1;\n}\nexport function isAndroid(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    return /Android/.test(ua);\n}\nexport function isIos(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    return /iPhone|iPod|iPad/.test(ua);\n}\nexport function isQQBrowser(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    return /QQBrowser/.test(ua);\n}\nexport function isIosWebview(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    if (isIos(ua)) {\n        return /.+AppleWebKit(?!.*Safari)/.test(ua);\n    }\n    return false;\n}\nexport function isAndroidWebview(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    if (isAndroid(ua)) {\n        return /Version\\/[\\d.]+/.test(ua) && !isOperaMini(ua);\n    }\n    return false;\n}\nexport function isIE() {\n    if (window.document.documentMode) {\n        return true;\n    }\n    return Boolean(window.navigator &&\n        window.navigator.userAgent &&\n        /Edge|MSIE|rv:11/i.test(window.navigator.userAgent));\n}\nexport function isIECompHeader() {\n    var mHttp = window.document.querySelector('meta[http-equiv=\"X-UA-Compatible\"]');\n    var mContent = window.document.querySelector('meta[content=\"IE=edge\"]');\n    if (mHttp && mContent) {\n        return true;\n    }\n    return false;\n}\nexport function isElectron() {\n    if (typeof process !== 'undefined' && process.versions && process.versions.electron) {\n        return true;\n    }\n    return false;\n}\nexport function isIEIntranet() {\n    if (window.document.documentMode) {\n        try {\n            var status_1 = window.status;\n            window.status = 'testIntranetMode';\n            if (window.status === 'testIntranetMode') {\n                window.status = status_1;\n                return true;\n            }\n            return false;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    return false;\n}\nexport function isMacOsCna() {\n    var userAgent = getUserAgent();\n    return /Macintosh.*AppleWebKit(?!.*Safari)/i.test(userAgent);\n}\nexport function isChrome(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    return /Chrome|Chromium|CriOS/.test(ua);\n}\nexport function isSafari(ua) {\n    if (ua === void 0) { ua = getUserAgent(); }\n    return /Safari/.test(ua) && !isChrome(ua);\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __extends, __read, __spread, __values } from \"tslib\";\nexport function getFunctionName(fn) {\n    return fn.name || fn.__name__ || fn.displayName || 'anonymous';\n}\nexport function setFunctionName(fn, name) {\n    try {\n        delete fn.name;\n        fn.name = name;\n    }\n    catch (err) {\n    }\n    fn.__name__ = fn.displayName = name;\n    return fn;\n}\nexport function base64encode(str) {\n    if (typeof btoa === 'function') {\n        return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function (m, p1) {\n            return String.fromCharCode(parseInt(p1, 16));\n        }));\n    }\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'utf8').toString('base64');\n    }\n    throw new Error(\"Can not find window.btoa or Buffer\");\n}\nexport function base64decode(str) {\n    if (typeof atob === 'function') {\n        return decodeURIComponent(Array.prototype.map\n            .call(atob(str), function (c) {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        })\n            .join(''));\n    }\n    if (typeof Buffer !== 'undefined') {\n        return Buffer.from(str, 'base64').toString('utf8');\n    }\n    throw new Error(\"Can not find window.atob or Buffer\");\n}\nexport function uniqueID() {\n    var chars = '0123456789abcdef';\n    var randomID = 'xxxxxxxxxx'.replace(/./g, function () {\n        return chars.charAt(Math.floor(Math.random() * chars.length));\n    });\n    var timeID = base64encode(new Date().toISOString().slice(11, 19).replace('T', '.'))\n        .replace(/[^a-zA-Z0-9]/g, '')\n        .toLowerCase();\n    return randomID + \"_\" + timeID;\n}\nvar objectIDs;\nexport function getObjectID(obj) {\n    objectIDs = objectIDs || new WeakMap();\n    if (obj === null || obj === undefined || (typeof obj !== 'object' && typeof obj !== 'function')) {\n        throw new Error(\"Invalid object\");\n    }\n    var uid = objectIDs.get(obj);\n    if (!uid) {\n        uid = typeof obj + \":\" + uniqueID();\n        objectIDs.set(obj, uid);\n    }\n    return uid;\n}\nfunction serializeArgs(args) {\n    try {\n        return JSON.stringify(Array.prototype.slice.call(args), function (subkey, val) {\n            if (typeof val === 'function') {\n                return \"memoize[\" + getObjectID(val) + \"]\";\n            }\n            return val;\n        });\n    }\n    catch (err) {\n        throw new Error('Arguments not serializable -- can not be used to memoize');\n    }\n}\nfunction getOrSet(weakMapOrObject, key, getter) {\n    var isWK = isWeakMap(weakMapOrObject);\n    if (isWK) {\n        if (weakMapOrObject.has(key)) {\n            return weakMapOrObject.get(key);\n        }\n    }\n    else {\n        if (weakMapOrObject.hasOwnProperty(key)) {\n            return weakMapOrObject[key];\n        }\n    }\n    var value = getter();\n    if (isWK) {\n        weakMapOrObject.set(key, value);\n    }\n    else {\n        weakMapOrObject[key] = value;\n    }\n    return value;\n}\nfunction getDefaultMemoizeOptions() {\n    return {};\n}\nvar memoizeGlobalIndex = 0;\nvar memoizeGlobalIndexValidFrom = 0;\nexport function memoize(method, options) {\n    if (options === void 0) { options = getDefaultMemoizeOptions(); }\n    var _a = options.thisNamespace, thisNamespace = _a === void 0 ? false : _a, cacheTime = options.time;\n    var simpleCache;\n    var thisCache;\n    var memoizeIndex = memoizeGlobalIndex;\n    memoizeGlobalIndex += 1;\n    var memoizedFunction = function memoizedFunction() {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (memoizeIndex < memoizeGlobalIndexValidFrom) {\n            simpleCache = null;\n            thisCache = null;\n            memoizeIndex = memoizeGlobalIndex;\n            memoizeGlobalIndex += 1;\n        }\n        var cache;\n        if (thisNamespace) {\n            thisCache = thisCache || new WeakMap();\n            cache = getOrSet(thisCache, this, getEmptyObject);\n        }\n        else {\n            cache = simpleCache = simpleCache || {};\n        }\n        var cacheKey = serializeArgs(args);\n        var cacheResult = cache[cacheKey];\n        if (cacheResult && cacheTime && Date.now() - cacheResult.time < cacheTime) {\n            delete cache[cacheKey];\n            cacheResult = null;\n        }\n        if (cacheResult) {\n            return cacheResult.value;\n        }\n        var time = Date.now();\n        var value = method.apply(this, arguments);\n        cache[cacheKey] = { time: time, value: value };\n        return value;\n    };\n    memoizedFunction.reset = function () {\n        simpleCache = null;\n        thisCache = null;\n    };\n    var result = memoizedFunction;\n    return setFunctionName(result, (options.name || getFunctionName(method)) + \"::memoized\");\n}\nmemoize.clear = function () {\n    memoizeGlobalIndexValidFrom = memoizeGlobalIndex;\n};\nexport function inlineMemoize(method, logic, args) {\n    if (args === void 0) { args = []; }\n    var cache = (method.__inline_memoize_cache = method.__inline_memoize_cache || {});\n    var key = serializeArgs(args);\n    if (cache.hasOwnProperty(key)) {\n        return cache[key];\n    }\n    var result = (cache[key] = logic.apply(void 0, __spread(args)));\n    return result;\n}\nexport function noop() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n}\nexport function once(method) {\n    var called = false;\n    var onceFunction = function () {\n        if (!called) {\n            called = true;\n            return method.apply(this, arguments);\n        }\n    };\n    return setFunctionName(onceFunction, getFunctionName(method) + \"::once\");\n}\nexport function hashStr(str) {\n    var hash = 0;\n    for (var i = 0; i < str.length; i++) {\n        hash += str[i].charCodeAt(0) * Math.pow((i % 10) + 1, 5);\n    }\n    return Math.floor(Math.pow(Math.sqrt(hash), 5));\n}\nexport function strHashStr(str) {\n    var hash = '';\n    for (var i = 0; i < str.length; i++) {\n        var total = str[i].charCodeAt(0) * i;\n        if (str[i + 1]) {\n            total += str[i + 1].charCodeAt(0) * (i - 1);\n        }\n        hash += String.fromCharCode(97 + (Math.abs(total) % 26));\n    }\n    return hash;\n}\nexport function match(str, pattern) {\n    var regMatch = str.match(pattern);\n    if (regMatch) {\n        return regMatch[0];\n    }\n}\nexport function awaitKey(obj, key) {\n    return new Promise(function (resolve, reject) {\n        var value = obj[key];\n        if (value) {\n            return resolve(value);\n        }\n        delete obj[key];\n        Object.defineProperty(obj, key, {\n            configurable: true,\n            set: function (item) {\n                value = item;\n                if (value) {\n                    resolve(value);\n                }\n            },\n            get: function () {\n                return value;\n            }\n        });\n    });\n}\nexport function stringifyError(err, level) {\n    if (level === void 0) { level = 1; }\n    if (level >= 3) {\n        return 'stringifyError stack overflow';\n    }\n    try {\n        if (!err) {\n            return \"<unknown error: \" + Object.prototype.toString.call(err) + \">\";\n        }\n        if (typeof err === 'string') {\n            return err;\n        }\n        if (err instanceof Error) {\n            var stack = err && err.stack;\n            var message = err && err.message;\n            if (stack && message) {\n                if (stack.indexOf(message) !== -1) {\n                    return stack;\n                }\n                else {\n                    return message + \"\\n\" + stack;\n                }\n            }\n            else if (stack) {\n                return stack;\n            }\n            else if (message) {\n                return message;\n            }\n        }\n        if (err && err.toString && typeof err.toString === 'function') {\n            return err.toString();\n        }\n        return Object.prototype.toString.call(err);\n    }\n    catch (newErr) {\n        return \"Error while stringifying error: \" + stringifyError(newErr, level + 1);\n    }\n}\nexport function stringifyErrorMessage(err) {\n    var defaultMessage = \"<unknown error: \" + Object.prototype.toString.call(err) + \">\";\n    if (!err) {\n        return defaultMessage;\n    }\n    if (err instanceof Error) {\n        return err.message || defaultMessage;\n    }\n    if (typeof err.message === 'string') {\n        return err.message || defaultMessage;\n    }\n    return defaultMessage;\n}\nexport function stringify(item) {\n    if (typeof item === 'string') {\n        return item;\n    }\n    if (item && item.toString && typeof item.toString === 'function') {\n        return item.toString();\n    }\n    return Object.prototype.toString.call(item);\n}\nexport function domainMatches(hostname, domain) {\n    hostname = hostname.split('://')[1];\n    var index = hostname.indexOf(domain);\n    return index !== -1 && hostname.slice(index) === domain;\n}\nexport function patchMethod(obj, name, handler) {\n    var original = obj[name];\n    obj[name] = function patchedMethod() {\n        return handler({\n            context: this,\n            args: Array.prototype.slice.call(arguments),\n            original: original,\n            callOriginal: function () {\n                return original.apply(this, arguments);\n            }\n        });\n    };\n}\nexport function extend(obj, source) {\n    if (!source) {\n        return obj;\n    }\n    if (Object.assign) {\n        return Object.assign(obj, source);\n    }\n    for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n            obj[key] = source[key];\n        }\n    }\n    return obj;\n}\nexport function values(obj) {\n    if (Object.values) {\n        return Object.values(obj);\n    }\n    var result = [];\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            result.push(obj[key]);\n        }\n    }\n    return result;\n}\nexport var memoizedValues = memoize(values);\nexport function perc(pixels, percentage) {\n    return Math.round((pixels * percentage) / 100);\n}\nexport function min() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return Math.min.apply(Math, __spread(args));\n}\nexport function max() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return Math.max.apply(Math, __spread(args));\n}\nexport function roundUp(num, nearest) {\n    var remainder = num % nearest;\n    return remainder ? num - remainder + nearest : num;\n}\nexport function regexMap(str, regexp, handler) {\n    var results = [];\n    str.replace(regexp, function regexMapMatcher(item) {\n        results.push(handler ? handler.apply(null, arguments) : item);\n    });\n    return results;\n}\nexport function svgToBase64(svg) {\n    return \"data:image/svg+xml;base64,\" + base64encode(svg);\n}\nexport function objFilter(obj, filter) {\n    var result = {};\n    for (var key in obj) {\n        if (!obj.hasOwnProperty(key) || !filter(obj[key], key)) {\n            continue;\n        }\n        result[key] = obj[key];\n    }\n    return result;\n}\nexport function identity(item) {\n    return item;\n}\nexport function regexTokenize(text, regexp) {\n    var result = [];\n    text.replace(regexp, function (token) {\n        result.push(token);\n        return '';\n    });\n    return result;\n}\nexport function promisify(fnOrPromise) {\n    var _this = this;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        if (isPromise(fnOrPromise)) {\n            return fnOrPromise;\n        }\n        return new Promise(function (resolve, reject) {\n            var _a;\n            function customCallback(err) {\n                var results = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    results[_i - 1] = arguments[_i];\n                }\n                if (err) {\n                    return reject(err);\n                }\n                return resolve(results.length === 1 ? results[0] : results);\n            }\n            args.push(customCallback);\n            (_a = fnOrPromise).call.apply(_a, __spread([_this], args));\n        });\n    };\n}\nexport function promiseDebounce(method, delay) {\n    if (delay === void 0) { delay = 50; }\n    var promise;\n    var timeout;\n    var promiseDebounced = function () {\n        if (timeout) {\n            clearTimeout(timeout);\n        }\n        var localPromise = (promise =\n            promise ||\n                new Promise(function (resolve, reject) {\n                    timeout = setTimeout(function () {\n                        promise = null;\n                        timeout = null;\n                        promisify(method)()\n                            .then(function (result) {\n                            resolve(result);\n                        })\n                            .catch(function (err) {\n                            reject(err);\n                        });\n                    }, delay);\n                }));\n        return localPromise;\n    };\n    return setFunctionName(promiseDebounced, getFunctionName(method) + \"::promiseDebounced\");\n}\nexport function safeInterval(method, time) {\n    var timeout;\n    function loop() {\n        timeout = setTimeout(function () {\n            var needStop = method();\n            if (!needStop) {\n                loop();\n            }\n        }, time);\n    }\n    loop();\n    return {\n        cancel: function () {\n            clearTimeout(timeout);\n        }\n    };\n}\nexport function isInteger(str) {\n    return Boolean(str.match(/^[0-9]+$/));\n}\nexport function isFloat(str) {\n    return Boolean(str.match(/^[0-9]+\\.[0-9]+$/));\n}\nexport function serializePrimitive(value) {\n    return value.toString();\n}\nexport function deserializePrimitive(value) {\n    if (value === 'true') {\n        return true;\n    }\n    else if (value === 'false') {\n        return false;\n    }\n    else if (isInteger(value)) {\n        return parseInt(value, 10);\n    }\n    else if (isFloat(value)) {\n        return parseFloat(value);\n    }\n    else {\n        return value;\n    }\n}\nexport function dotify(obj, prefix, newobj) {\n    if (prefix === void 0) { prefix = ''; }\n    if (newobj === void 0) { newobj = {}; }\n    prefix = prefix ? prefix + \".\" : prefix;\n    for (var key in obj) {\n        if (!obj.hasOwnProperty(key) ||\n            obj[key] === undefined ||\n            obj[key] === null ||\n            typeof obj[key] === 'function') {\n            continue;\n        }\n        else if (obj[key] &&\n            Array.isArray(obj[key]) &&\n            obj[key].length &&\n            obj[key].every(function (val) { return typeof val !== 'object'; })) {\n            newobj[\"\" + prefix + key + \"[]\"] = obj[key].join(',');\n        }\n        else if (obj[key] && typeof obj[key] === 'object') {\n            newobj = dotify(obj[key], \"\" + prefix + key, newobj);\n        }\n        else {\n            newobj[\"\" + prefix + key] = serializePrimitive(obj[key]);\n        }\n    }\n    return newobj;\n}\nexport function undotify(obj) {\n    var result = {};\n    for (var key in obj) {\n        if (!obj.hasOwnProperty(key) || typeof obj[key] !== 'string') {\n            continue;\n        }\n        var value = obj[key];\n        if (key.match(/^.+\\[\\]$/)) {\n            key = key.slice(0, -2);\n            value = value.split(',').map(deserializePrimitive);\n        }\n        else {\n            value = deserializePrimitive(value);\n        }\n        var keyResult = result;\n        var parts = key.split('.');\n        for (var i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            var isLast = i + 1 === parts.length;\n            var isIndex = !isLast && isInteger(parts[i + 1]);\n            if (part === 'constructor' || part === 'prototype' || part === '__proto__') {\n                throw new Error(\"Disallowed key: \" + part);\n            }\n            if (isLast) {\n                keyResult[part] = value;\n            }\n            else {\n                keyResult = keyResult[part] = keyResult[part] || (isIndex ? [] : {});\n            }\n        }\n    }\n    return result;\n}\nexport function eventEmitter() {\n    var triggered = {};\n    var handlers = {};\n    return {\n        on: function (eventName, handler) {\n            var handlerList = (handlers[eventName] = handlers[eventName] || []);\n            handlerList.push(handler);\n            var cancelled = false;\n            return {\n                cancel: function () {\n                    if (!cancelled) {\n                        cancelled = true;\n                        handlerList.splice(handlerList.indexOf(handler), 1);\n                    }\n                }\n            };\n        },\n        once: function (eventName, handler) {\n            var listener = this.on(eventName, function () {\n                listener.cancel();\n                handler();\n            });\n            return listener;\n        },\n        trigger: function (eventName) {\n            var e_1, _a;\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            var handlerList = handlers[eventName];\n            var promises = [];\n            if (handlerList) {\n                var _loop_1 = function (handler) {\n                    promises.push(new Promise(function (resolve, reject) {\n                        var result = handler.apply(void 0, __spread(args));\n                        resolve(result);\n                    }));\n                };\n                try {\n                    for (var handlerList_1 = __values(handlerList), handlerList_1_1 = handlerList_1.next(); !handlerList_1_1.done; handlerList_1_1 = handlerList_1.next()) {\n                        var handler = handlerList_1_1.value;\n                        _loop_1(handler);\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (handlerList_1_1 && !handlerList_1_1.done && (_a = handlerList_1.return)) _a.call(handlerList_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n            }\n            return Promise.all(promises).then(noop);\n        },\n        triggerOnce: function (eventName) {\n            var args = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                args[_i - 1] = arguments[_i];\n            }\n            if (triggered[eventName]) {\n                return Promise.resolve();\n            }\n            triggered[eventName] = true;\n            return this.trigger.apply(this, __spread([eventName], args));\n        },\n        reset: function () {\n            handlers = {};\n        }\n    };\n}\nexport function camelToDasherize(string) {\n    return string.replace(/([A-Z])/g, function (g) {\n        return \"-\" + g.toLowerCase();\n    });\n}\nexport function dasherizeToCamel(string) {\n    return string.replace(/-([a-z])/g, function (g) {\n        return g[1].toUpperCase();\n    });\n}\nexport function capitalizeFirstLetter(string) {\n    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();\n}\nexport function get(item, path, def) {\n    if (!path) {\n        return def;\n    }\n    var pathParts = path.split('.');\n    for (var i = 0; i < pathParts.length; i++) {\n        if (typeof item === 'object' && item !== null) {\n            item = item[pathParts[i]];\n        }\n        else {\n            return def;\n        }\n    }\n    return item === undefined ? def : item;\n}\nexport function safeTimeout(method, time) {\n    var interval = safeInterval(function () {\n        time -= 100;\n        if (time <= 0) {\n            method();\n            interval.cancel();\n            return true;\n        }\n    }, 100);\n}\nexport function defineLazyProp(obj, key, getter) {\n    if (Array.isArray(obj)) {\n        if (typeof key !== 'number') {\n            throw new TypeError(\"Array key must be number\");\n        }\n    }\n    else if (typeof obj === 'object' && obj !== null) {\n        if (typeof key !== 'string') {\n            throw new TypeError(\"Object key must be string\");\n        }\n    }\n    Object.defineProperty(obj, key, {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n            delete obj[key];\n            var value = getter();\n            obj[key] = value;\n            return value;\n        },\n        set: function (value) {\n            delete obj[key];\n            obj[key] = value;\n        }\n    });\n}\nexport function arrayFrom(item) {\n    return Array.prototype.slice.call(item);\n}\nexport function isObject(item) {\n    return typeof item === 'object' && item !== null;\n}\nexport function isObjectObject(obj) {\n    return isObject(obj) && Object.prototype.toString.call(obj) === '[object Object]';\n}\nexport function isPlainObject(obj) {\n    if (!isObjectObject(obj)) {\n        return false;\n    }\n    var constructor = obj.constructor;\n    if (typeof constructor !== 'function') {\n        return false;\n    }\n    var prototype = constructor.prototype;\n    if (!isObjectObject(prototype)) {\n        return false;\n    }\n    if (!prototype.hasOwnProperty('isPrototypeOf')) {\n        return false;\n    }\n    return true;\n}\nexport function isPromise(item) {\n    try {\n        if (!item) {\n            return false;\n        }\n        if (typeof Promise !== 'undefined' && item instanceof Promise) {\n            return true;\n        }\n        if (typeof window !== 'undefined' &&\n            typeof window.Window === 'function' &&\n            item instanceof window.Window) {\n            return false;\n        }\n        if (typeof window !== 'undefined' &&\n            typeof window.constructor === 'function' &&\n            item instanceof window.constructor) {\n            return false;\n        }\n        var toString_1 = {}.toString;\n        if (toString_1) {\n            var name_1 = toString_1.call(item);\n            if (name_1 === '[object Window]' ||\n                name_1 === '[object global]' ||\n                name_1 === '[object DOMWindow]') {\n                return false;\n            }\n        }\n        if (typeof item.then === 'function') {\n            return true;\n        }\n    }\n    catch (err) {\n        return false;\n    }\n    return false;\n}\nexport function replaceObject(item, replacer, fullKey) {\n    if (fullKey === void 0) { fullKey = ''; }\n    if (Array.isArray(item)) {\n        var length_1 = item.length;\n        var result = [];\n        var _loop_2 = function (i) {\n            defineLazyProp(result, i, function () {\n                var itemKey = fullKey ? fullKey + \".\" + i : \"\" + i;\n                var el = item[i];\n                var child = replacer(el, i, itemKey);\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    child = replaceObject(child, replacer, itemKey);\n                }\n                return child;\n            });\n        };\n        for (var i = 0; i < length_1; i++) {\n            _loop_2(i);\n        }\n        return result;\n    }\n    else if (isPlainObject(item)) {\n        var result = {};\n        var _loop_3 = function (key) {\n            if (!item.hasOwnProperty(key)) {\n                return \"continue\";\n            }\n            defineLazyProp(result, key, function () {\n                var itemKey = fullKey ? fullKey + \".\" + key : \"\" + key;\n                var el = item[key];\n                var child = replacer(el, key, itemKey);\n                if (isPlainObject(child) || Array.isArray(child)) {\n                    child = replaceObject(child, replacer, itemKey);\n                }\n                return child;\n            });\n        };\n        for (var key in item) {\n            _loop_3(key);\n        }\n        return result;\n    }\n    else {\n        throw new Error(\"Pass an object or array\");\n    }\n}\nexport function copyProp(source, target, name, def) {\n    if (source.hasOwnProperty(name)) {\n        var descriptor = Object.getOwnPropertyDescriptor(source, name);\n        Object.defineProperty(target, name, descriptor);\n    }\n    else {\n        target[name] = def;\n    }\n}\nexport function regex(pattern, string, start) {\n    if (start === void 0) { start = 0; }\n    if (typeof pattern === 'string') {\n        pattern = new RegExp(pattern);\n    }\n    var result = string.slice(start).match(pattern);\n    if (!result) {\n        return;\n    }\n    var index = result.index;\n    var regmatch = result[0];\n    return {\n        text: regmatch,\n        groups: result.slice(1),\n        start: start + index,\n        end: start + index + regmatch.length,\n        length: regmatch.length,\n        replace: function (text) {\n            if (!regmatch) {\n                return '';\n            }\n            return \"\" + regmatch.slice(0, start + index) + text + regmatch.slice(index + regmatch.length);\n        }\n    };\n}\nexport function regexAll(pattern, string) {\n    var matches = [];\n    var start = 0;\n    while (true) {\n        var regmatch = regex(pattern, string, start);\n        if (!regmatch) {\n            break;\n        }\n        matches.push(regmatch);\n        start = regmatch.end;\n    }\n    return matches;\n}\nexport function isDefined(value) {\n    return value !== null && value !== undefined;\n}\nexport function cycle(method, index) {\n    if (index === void 0) { index = 0; }\n    return new Promise(function (resolve, reject) {\n        var result;\n        try {\n            result = method(index);\n            resolve(result);\n        }\n        catch (err) {\n            reject(err);\n            cycle(method, ++index);\n        }\n    });\n}\nexport function debounce(method, time) {\n    if (time === void 0) { time = 100; }\n    var timeout;\n    var debounceWrapper = function () {\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            return method.apply(this, arguments);\n        }, time);\n    };\n    return setFunctionName(debounceWrapper, getFunctionName(method) + \"::debounced\");\n}\nexport function isRegex(regx) {\n    return Object.prototype.toString.call(regx) === '[object RegExp]';\n}\nexport function isWeakMap(wk) {\n    return Object.prototype.toString.call(wk) === '[object WeakMap]';\n}\nexport function getEmptyObject() {\n    return {};\n}\nexport var weakMapMemoize = function (method) {\n    var weakmap = new WeakMap();\n    return function weakmapMemoized(arg) {\n        var _this = this;\n        return getOrSet(weakmap, arg, function () { return method.call(_this, arg); });\n    };\n};\nexport var weakMapMemoizePromise = function (method) {\n    var weakmap = new WeakMap();\n    return function weakmapMemoizedPromise(arg) {\n        var _this = this;\n        return getOrSet(weakmap, arg, function () {\n            return method.call(_this, arg).finally(function () {\n                weakmap.delete(arg);\n            });\n        });\n    };\n};\nexport function cleanup(obj) {\n    var tasks = [];\n    var cleaned = false;\n    var cleanErr;\n    return {\n        set: function (name, item) {\n            if (!cleaned) {\n                obj[name] = item;\n                this.register(function () {\n                    delete obj[name];\n                });\n            }\n            return item;\n        },\n        register: function (method) {\n            if (cleaned) {\n                method(cleanErr);\n            }\n            else {\n                tasks.push(once(function () { return method(cleanErr); }));\n            }\n        },\n        all: function (err) {\n            cleanErr = err;\n            var results = [];\n            cleaned = true;\n            while (tasks.length) {\n                var task = tasks.shift();\n                results.push(task());\n            }\n            return Promise.all(results).then(noop);\n        }\n    };\n}\nexport function tryCatch(fn) {\n    var result;\n    var error;\n    try {\n        result = fn();\n    }\n    catch (err) {\n        error = err;\n    }\n    return { result: result, error: error };\n}\nexport function removeFromArray(arr, item) {\n    var index = arr.indexOf(item);\n    if (index !== -1) {\n        arr.splice(index, 1);\n    }\n}\nexport function assertExists(name, thing) {\n    if (thing === null || typeof thing === 'undefined') {\n        throw new Error(\"Expected \" + name + \" to be present\");\n    }\n    return thing;\n}\nexport function unique(arr) {\n    var e_2, _a;\n    var result = {};\n    try {\n        for (var arr_1 = __values(arr), arr_1_1 = arr_1.next(); !arr_1_1.done; arr_1_1 = arr_1.next()) {\n            var item = arr_1_1.value;\n            result[item] = true;\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (arr_1_1 && !arr_1_1.done && (_a = arr_1.return)) _a.call(arr_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return Object.keys(result);\n}\nexport var constHas = function (constant, value) {\n    return memoizedValues(constant).indexOf(value) !== -1;\n};\nexport function dedupeErrors(handler) {\n    var seenErrors = [];\n    var seenStringifiedErrors = {};\n    return function (err) {\n        if (seenErrors.indexOf(err) !== -1) {\n            return;\n        }\n        seenErrors.push(err);\n        var stringifiedError = stringifyError(err);\n        if (seenStringifiedErrors[stringifiedError]) {\n            return;\n        }\n        seenStringifiedErrors[stringifiedError] = true;\n        return handler(err);\n    };\n}\nvar ExtendableError = (function (_super) {\n    __extends(ExtendableError, _super);\n    function ExtendableError(message) {\n        var _this = _super.call(this, message) || this;\n        _this.name = _this.constructor.name;\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(_this, _this.constructor);\n        }\n        else {\n            _this.stack = new Error(message).stack;\n        }\n        return _this;\n    }\n    return ExtendableError;\n}(Error));\nexport { ExtendableError };\n","export var KEY_CODES = {\n    ENTER: 13,\n    SPACE: 32\n};\nexport var ATTRIBUTES = {\n    UID: 'data-uid'\n};\n","import { __assign, __extends, __read, __spread, __values } from \"tslib\";\nimport { inlineMemoize, memoize, noop, stringify, capitalizeFirstLetter, once, extend, safeInterval, uniqueID, arrayFrom, ExtendableError } from './util';\nimport { KEY_CODES, ATTRIBUTES } from './constants';\nexport function urlEncode(str) {\n    return str.replace(/\\?/g, '%3F').replace(/&/g, '%26').replace(/#/g, '%23').replace(/\\+/g, '%2B');\n}\nexport function isDocumentReady() {\n    return Boolean(document.body) && document.readyState === 'complete';\n}\nexport function isDocumentInteractive() {\n    return Boolean(document.body) && document.readyState === 'interactive';\n}\nexport function waitForWindowReady() {\n    return inlineMemoize(waitForWindowReady, function () {\n        return new Promise(function (resolve) {\n            if (isDocumentReady()) {\n                resolve();\n            }\n            window.addEventListener('load', function () { return resolve(); });\n        });\n    });\n}\nexport var waitForDocumentReady = memoize(function () {\n    return new Promise(function (resolve) {\n        if (isDocumentReady() || isDocumentInteractive()) {\n            return resolve();\n        }\n        var interval = setInterval(function () {\n            if (isDocumentReady() || isDocumentInteractive()) {\n                clearInterval(interval);\n                return resolve();\n            }\n        }, 10);\n    });\n});\nexport function waitForDocumentBody() {\n    return new Promise(function (resolve) {\n        if (document.body) {\n            return resolve(document.body);\n        }\n        return waitForDocumentReady().then(function () {\n            if (document.body) {\n                return resolve(document.body);\n            }\n            throw new Error('Document ready but document.body not present');\n        });\n    });\n}\nexport function parseQuery(queryString) {\n    return inlineMemoize(parseQuery, function () {\n        var e_1, _a;\n        var params = {};\n        if (!queryString) {\n            return params;\n        }\n        if (queryString.indexOf('=') === -1) {\n            return params;\n        }\n        try {\n            for (var _b = __values(queryString.split('&')), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var queryStr = _c.value;\n                var pair = queryStr.split('=');\n                if (pair[0] && pair[1]) {\n                    params[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return params;\n    }, [queryString]);\n}\nexport function getQueryParam(name) {\n    return parseQuery(window.location.search.slice(1))[name];\n}\nexport function formatQuery(obj) {\n    if (obj === void 0) { obj = {}; }\n    return Object.keys(obj)\n        .filter(function (key) {\n        return typeof obj[key] === 'string' || typeof obj[key] === 'boolean';\n    })\n        .map(function (key) {\n        var val = obj[key];\n        if (typeof val !== 'string' && typeof val !== 'boolean') {\n            throw new TypeError(\"Invalid type for query\");\n        }\n        return urlEncode(key) + \"=\" + urlEncode(val.toString());\n    })\n        .join('&');\n}\nexport function extendQuery(originalQuery, props) {\n    if (props === void 0) { props = {}; }\n    if (!props || !Object.keys(props).length) {\n        return originalQuery;\n    }\n    return formatQuery(__assign(__assign({}, parseQuery(originalQuery)), props));\n}\nexport function extendUrl(url, options) {\n    var _a, _b;\n    var query = options.query || {};\n    var hash = options.hash || {};\n    var originalUrl;\n    var originalQuery;\n    var originalHash;\n    _a = __read(url.split('#'), 2), originalUrl = _a[0], originalHash = _a[1];\n    _b = __read(originalUrl.split('?'), 2), originalUrl = _b[0], originalQuery = _b[1];\n    var queryString = extendQuery(originalQuery, query);\n    var hashString = extendQuery(originalHash, hash);\n    if (queryString) {\n        originalUrl = originalUrl + \"?\" + queryString;\n    }\n    if (hashString) {\n        originalUrl = originalUrl + \"#\" + hashString;\n    }\n    return originalUrl;\n}\nexport function isElementVisible(el) {\n    return Boolean(el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n}\nexport function getPerformance() {\n    return inlineMemoize(getPerformance, function () {\n        var performance = window.performance;\n        if (performance &&\n            performance.now &&\n            performance.timing &&\n            performance.timing.connectEnd &&\n            performance.timing.navigationStart &&\n            Math.abs(performance.now() - Date.now()) > 1000 &&\n            performance.now() - (performance.timing.connectEnd - performance.timing.navigationStart) > 0) {\n            return performance;\n        }\n    });\n}\nexport function enablePerformance() {\n    return Boolean(getPerformance());\n}\nexport function getPageRenderTime() {\n    return waitForDocumentReady().then(function () {\n        var performance = getPerformance();\n        if (!performance) {\n            return;\n        }\n        var timing = performance.timing;\n        if (timing.connectEnd && timing.domInteractive) {\n            return timing.domInteractive - timing.connectEnd;\n        }\n    });\n}\nexport function htmlEncode(html) {\n    if (html === void 0) { html = ''; }\n    return html\n        .toString()\n        .replace(/&/g, '&amp;')\n        .replace(/</g, '&lt;')\n        .replace(/>/g, '&gt;')\n        .replace(/\"/g, '&quot;')\n        .replace(/'/g, '&#39;')\n        .replace(/\\//g, '&#x2F');\n}\nexport function querySelectorAll(selector, doc) {\n    if (doc === void 0) { doc = window.document; }\n    return Array.prototype.slice.call(doc.querySelectorAll(selector));\n}\nexport function onClick(element, handler) {\n    element.addEventListener('touchstart', noop);\n    element.addEventListener('click', handler);\n    element.addEventListener('keypress', function (event) {\n        if (event.keyCode === KEY_CODES.ENTER || event.keyCode === KEY_CODES.SPACE) {\n            return handler(event);\n        }\n    });\n}\nexport function getScript(_a) {\n    var _b = _a.host, host = _b === void 0 ? window.location.host : _b, path = _a.path, _c = _a.reverse, reverse = _c === void 0 ? false : _c;\n    return inlineMemoize(getScript, function () {\n        var e_2, _a;\n        var url = \"\" + host + path;\n        var scripts = Array.prototype.slice.call(document.getElementsByTagName('script'));\n        if (reverse) {\n            scripts.reverse();\n        }\n        try {\n            for (var scripts_1 = __values(scripts), scripts_1_1 = scripts_1.next(); !scripts_1_1.done; scripts_1_1 = scripts_1.next()) {\n                var script = scripts_1_1.value;\n                if (!script.src) {\n                    continue;\n                }\n                var src = script.src.replace(/^https?:\\/\\//, '').split('?')[0];\n                if (src === url) {\n                    return script;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (scripts_1_1 && !scripts_1_1.done && (_a = scripts_1.return)) _a.call(scripts_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n    }, [path]);\n}\nexport function isLocalStorageEnabled() {\n    return inlineMemoize(isLocalStorageEnabled, function () {\n        try {\n            if (typeof window === 'undefined') {\n                return false;\n            }\n            if (window.localStorage) {\n                var value = Math.random().toString();\n                window.localStorage.setItem('__test__localStorage__', value);\n                var result = window.localStorage.getItem('__test__localStorage__');\n                window.localStorage.removeItem('__test__localStorage__');\n                if (value === result) {\n                    return true;\n                }\n            }\n        }\n        catch (err) {\n        }\n        return false;\n    });\n}\nexport function getBrowserLocales() {\n    var nav = window.navigator;\n    var locales = nav.languages ? __spread(nav.languages) : [];\n    if (nav.language) {\n        locales.push(nav.language);\n    }\n    if (nav.userLanguage) {\n        locales.push(nav.userLanguage);\n    }\n    return locales\n        .map(function (locale) {\n        if (locale && locale.match(/^[a-z]{2}[-_][A-Z]{2}$/)) {\n            var _a = __read(locale.split(/[-_]/), 2), lang = _a[0], country = _a[1];\n            return { country: country, lang: lang };\n        }\n        if (locale && locale.match(/^[a-z]{2}$/)) {\n            return { lang: locale };\n        }\n        return null;\n    })\n        .filter(Boolean);\n}\nexport function appendChild(container, child) {\n    container.appendChild(child);\n}\nexport function isElement(element) {\n    if (element instanceof window.Element) {\n        return true;\n    }\n    if (element !== null &&\n        typeof element === 'object' &&\n        element.nodeType === 1 &&\n        typeof element.style === 'object' &&\n        typeof element.ownerDocument === 'object') {\n        return true;\n    }\n    return false;\n}\nexport function getElementSafe(id, doc) {\n    if (doc === void 0) { doc = document; }\n    if (isElement(id)) {\n        return id;\n    }\n    if (typeof id === 'string') {\n        return doc.querySelector(id);\n    }\n}\nexport function getElement(id, doc) {\n    if (doc === void 0) { doc = document; }\n    var element = getElementSafe(id, doc);\n    if (element) {\n        return element;\n    }\n    throw new Error(\"Can not find element: \" + stringify(id));\n}\nexport function elementReady(id) {\n    return new Promise(function (resolve, reject) {\n        var name = stringify(id);\n        var el = getElementSafe(id);\n        if (el) {\n            return resolve(el);\n        }\n        if (isDocumentReady()) {\n            return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n        }\n        var interval = setInterval(function () {\n            el = getElementSafe(id);\n            if (el) {\n                clearInterval(interval);\n                return resolve(el);\n            }\n            if (isDocumentReady()) {\n                clearInterval(interval);\n                return reject(new Error(\"Document is ready and element \" + name + \" does not exist\"));\n            }\n        }, 10);\n    });\n}\nvar PopupOpenError = (function (_super) {\n    __extends(PopupOpenError, _super);\n    function PopupOpenError() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PopupOpenError;\n}(ExtendableError));\nexport { PopupOpenError };\nexport function popup(url, options) {\n    options = options || {};\n    var width = options.width, height = options.height;\n    var top = 0;\n    var left = 0;\n    if (width) {\n        if (window.outerWidth) {\n            left = Math.round((window.outerWidth - width) / 2) + window.screenX;\n        }\n        else if (window.screen.width) {\n            left = Math.round((window.screen.width - width) / 2);\n        }\n    }\n    if (height) {\n        if (window.outerHeight) {\n            top = Math.round((window.outerHeight - height) / 2) + window.screenY;\n        }\n        else if (window.screen.height) {\n            top = Math.round((window.screen.height - height) / 2);\n        }\n    }\n    if (width && height) {\n        options = __assign({ top: top,\n            left: left,\n            width: width,\n            height: height, status: 1, toolbar: 0, menubar: 0, resizable: 1, scrollbars: 1 }, options);\n    }\n    var name = options.name || '';\n    delete options.name;\n    var params = Object.keys(options)\n        .map(function (key) {\n        if (options[key] !== null &&\n            options[key] !== undefined) {\n            return key + \"=\" + stringify(options[key]);\n        }\n    })\n        .filter(Boolean)\n        .join(',');\n    var win;\n    try {\n        win = window.open(url, name, params);\n    }\n    catch (err) {\n        throw new PopupOpenError(\"Can not open popup window - \" + (err.stack || err.message));\n    }\n    if (!win || win.closed) {\n        var err = new PopupOpenError(\"Can not open popup window - blocked\");\n        throw err;\n    }\n    window.addEventListener('unload', function () { return win.close(); });\n    return win;\n}\nexport function writeToWindow(win, html) {\n    try {\n        win.document.open();\n        win.document.write(html);\n        win.document.close();\n    }\n    catch (err) {\n        try {\n            win.location = \"javascript: document.open(); document.write(\" + JSON.stringify(html) + \"); document.close();\";\n        }\n        catch (err2) {\n        }\n    }\n}\nexport function writeElementToWindow(win, el) {\n    var e_3, _a, e_4, _b;\n    var tag = el.tagName.toLowerCase();\n    if (tag !== 'html') {\n        throw new Error(\"Expected element to be html, got \" + tag);\n    }\n    var documentElement = win.document.documentElement;\n    try {\n        for (var _c = __values(arrayFrom(documentElement.children)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var child = _d.value;\n            documentElement.removeChild(child);\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    try {\n        for (var _e = __values(arrayFrom(el.children)), _f = _e.next(); !_f.done; _f = _e.next()) {\n            var child = _f.value;\n            documentElement.appendChild(child);\n        }\n    }\n    catch (e_4_1) { e_4 = { error: e_4_1 }; }\n    finally {\n        try {\n            if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n        }\n        finally { if (e_4) throw e_4.error; }\n    }\n}\nexport function setStyle(el, styleText, doc) {\n    if (doc === void 0) { doc = window.document; }\n    if (el.styleSheet) {\n        el.styleSheet.cssText = styleText;\n    }\n    else {\n        el.appendChild(doc.createTextNode(styleText));\n    }\n}\nvar awaitFrameLoadPromises;\nexport function awaitFrameLoad(frame) {\n    awaitFrameLoadPromises = awaitFrameLoadPromises || new WeakMap();\n    if (awaitFrameLoadPromises.has(frame)) {\n        var promise_1 = awaitFrameLoadPromises.get(frame);\n        if (promise_1) {\n            return promise_1;\n        }\n    }\n    var promise = new Promise(function (resolve, reject) {\n        frame.addEventListener('load', function () {\n            resolve(frame);\n        });\n        frame.addEventListener('error', function (err) {\n            if (frame.contentWindow) {\n                resolve(frame);\n            }\n            else {\n                reject(err);\n            }\n        });\n    });\n    awaitFrameLoadPromises.set(frame, promise);\n    return promise;\n}\nexport function awaitFrameWindow(frame) {\n    return awaitFrameLoad(frame).then(function (loadedFrame) {\n        if (!loadedFrame.contentWindow) {\n            throw new Error(\"Could not find window in iframe\");\n        }\n        return loadedFrame.contentWindow;\n    });\n}\nvar getDefaultCreateElementOptions = function () {\n    return {};\n};\nexport function createElement(tag, options, container) {\n    var e_5, _a;\n    if (tag === void 0) { tag = 'div'; }\n    if (options === void 0) { options = getDefaultCreateElementOptions(); }\n    tag = tag.toLowerCase();\n    var element = document.createElement(tag);\n    if (options.style) {\n        extend(element.style, options.style);\n    }\n    if (options.class) {\n        element.className = options.class.join(' ');\n    }\n    if (options.id) {\n        element.setAttribute('id', options.id);\n    }\n    if (options.attributes) {\n        try {\n            for (var _b = __values(Object.keys(options.attributes)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var key = _c.value;\n                element.setAttribute(key, options.attributes[key]);\n            }\n        }\n        catch (e_5_1) { e_5 = { error: e_5_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_5) throw e_5.error; }\n        }\n    }\n    if (options.styleSheet) {\n        setStyle(element, options.styleSheet);\n    }\n    if (container) {\n        appendChild(container, element);\n    }\n    if (options.html) {\n        if (tag === 'iframe') {\n            if (!container || !element.contentWindow) {\n                throw new Error(\"Iframe html can not be written unless container provided and iframe in DOM\");\n            }\n            writeToWindow(element.contentWindow, options.html);\n        }\n        else {\n            element.innerHTML = options.html;\n        }\n    }\n    return element;\n}\nvar getDefaultIframeOptions = function () {\n    return {};\n};\nvar getDefaultStringMap = function () {\n    return {};\n};\nexport function iframe(options, container) {\n    if (options === void 0) { options = getDefaultIframeOptions(); }\n    var attributes = options.attributes || getDefaultStringMap();\n    var style = options.style || getDefaultStringMap();\n    var newAttributes = __assign({ allowTransparency: 'true' }, attributes);\n    var newStyle = __assign({ backgroundColor: 'transparent', border: 'none' }, style);\n    var frame = createElement('iframe', {\n        attributes: newAttributes,\n        style: newStyle,\n        html: options.html,\n        class: options.class\n    });\n    var isIE = window.navigator.userAgent.match(/MSIE|Edge/i);\n    if (!frame.hasAttribute('id')) {\n        frame.setAttribute('id', uniqueID());\n    }\n    awaitFrameLoad(frame);\n    if (container) {\n        var el = getElement(container);\n        el.appendChild(frame);\n    }\n    if (options.url || isIE) {\n        frame.setAttribute('src', options.url || 'about:blank');\n    }\n    return frame;\n}\nexport function addEventListener(obj, event, handler) {\n    obj.addEventListener(event, handler);\n    return {\n        cancel: function () {\n            obj.removeEventListener(event, handler);\n        }\n    };\n}\nexport function bindEvents(element, eventNames, handler) {\n    var e_6, _a;\n    handler = once(handler);\n    try {\n        for (var eventNames_1 = __values(eventNames), eventNames_1_1 = eventNames_1.next(); !eventNames_1_1.done; eventNames_1_1 = eventNames_1.next()) {\n            var eventName = eventNames_1_1.value;\n            element.addEventListener(eventName, handler);\n        }\n    }\n    catch (e_6_1) { e_6 = { error: e_6_1 }; }\n    finally {\n        try {\n            if (eventNames_1_1 && !eventNames_1_1.done && (_a = eventNames_1.return)) _a.call(eventNames_1);\n        }\n        finally { if (e_6) throw e_6.error; }\n    }\n    return {\n        cancel: once(function () {\n            var e_7, _a;\n            try {\n                for (var eventNames_2 = __values(eventNames), eventNames_2_1 = eventNames_2.next(); !eventNames_2_1.done; eventNames_2_1 = eventNames_2.next()) {\n                    var eventName = eventNames_2_1.value;\n                    element.removeEventListener(eventName, handler);\n                }\n            }\n            catch (e_7_1) { e_7 = { error: e_7_1 }; }\n            finally {\n                try {\n                    if (eventNames_2_1 && !eventNames_2_1.done && (_a = eventNames_2.return)) _a.call(eventNames_2);\n                }\n                finally { if (e_7) throw e_7.error; }\n            }\n        })\n    };\n}\nvar VENDOR_PREFIXES = ['webkit', 'moz', 'ms', 'o'];\nexport function setVendorCSS(element, name, value) {\n    var e_8, _a;\n    element.style[name] = value;\n    var capitalizedName = capitalizeFirstLetter(name);\n    try {\n        for (var VENDOR_PREFIXES_1 = __values(VENDOR_PREFIXES), VENDOR_PREFIXES_1_1 = VENDOR_PREFIXES_1.next(); !VENDOR_PREFIXES_1_1.done; VENDOR_PREFIXES_1_1 = VENDOR_PREFIXES_1.next()) {\n            var prefix = VENDOR_PREFIXES_1_1.value;\n            element.style[\"\" + prefix + capitalizedName] = value;\n        }\n    }\n    catch (e_8_1) { e_8 = { error: e_8_1 }; }\n    finally {\n        try {\n            if (VENDOR_PREFIXES_1_1 && !VENDOR_PREFIXES_1_1.done && (_a = VENDOR_PREFIXES_1.return)) _a.call(VENDOR_PREFIXES_1);\n        }\n        finally { if (e_8) throw e_8.error; }\n    }\n}\nvar ANIMATION_START_EVENTS = [\n    'animationstart',\n    'webkitAnimationStart',\n    'oAnimationStart',\n    'MSAnimationStart'\n];\nvar ANIMATION_END_EVENTS = [\n    'animationend',\n    'webkitAnimationEnd',\n    'oAnimationEnd',\n    'MSAnimationEnd'\n];\nexport function animate(element, name, clean, timeout) {\n    if (timeout === void 0) { timeout = 1000; }\n    return new Promise(function (resolve, reject) {\n        var el = getElement(element);\n        if (!el) {\n            return resolve();\n        }\n        var hasStarted = false;\n        var startTimeout;\n        var endTimeout;\n        var startEvent;\n        var endEvent;\n        function cleanUp() {\n            clearTimeout(startTimeout);\n            clearTimeout(endTimeout);\n            startEvent.cancel();\n            endEvent.cancel();\n        }\n        startEvent = bindEvents(el, ANIMATION_START_EVENTS, function (event) {\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n            clearTimeout(startTimeout);\n            event.stopPropagation();\n            startEvent.cancel();\n            hasStarted = true;\n            endTimeout = setTimeout(function () {\n                cleanUp();\n                resolve();\n            }, timeout);\n        });\n        endEvent = bindEvents(el, ANIMATION_END_EVENTS, function (event) {\n            if (event.target !== el || event.animationName !== name) {\n                return;\n            }\n            cleanUp();\n            if (typeof event.animationName === 'string' &&\n                event.animationName !== name) {\n                return reject(\"Expected animation name to be \" + name + \", found \" + event.animationName);\n            }\n            return resolve();\n        });\n        setVendorCSS(el, 'animationName', name);\n        startTimeout = setTimeout(function () {\n            if (!hasStarted) {\n                cleanUp();\n                return resolve();\n            }\n        }, 200);\n        if (clean) {\n            clean(cleanUp);\n        }\n    });\n}\nexport function makeElementVisible(element) {\n    element.style.setProperty('visibility', '');\n}\nexport function makeElementInvisible(element) {\n    element.style.setProperty('visibility', 'hidden', 'important');\n}\nexport function showElement(element) {\n    element.style.setProperty('display', '');\n}\nexport function hideElement(element) {\n    element.style.setProperty('display', 'none', 'important');\n}\nexport function destroyElement(element) {\n    if (element && element.parentNode) {\n        element.parentNode.removeChild(element);\n    }\n}\nexport function showAndAnimate(element, name, clean) {\n    var animation = animate(element, name, clean);\n    showElement(element);\n    return animation;\n}\nexport function animateAndHide(element, name, clean) {\n    return animate(element, name, clean).then(function () {\n        hideElement(element);\n    });\n}\nexport function addClass(element, name) {\n    element.classList.add(name);\n}\nexport function removeClass(element, name) {\n    element.classList.remove(name);\n}\nexport function isElementClosed(el) {\n    if (!el ||\n        !el.parentNode ||\n        !el.ownerDocument ||\n        !el.ownerDocument.documentElement ||\n        !el.ownerDocument.documentElement.contains(el)) {\n        return true;\n    }\n    return false;\n}\nexport function watchElementForClose(element, handler) {\n    handler = once(handler);\n    var cancelled = false;\n    var mutationObservers = [];\n    var interval;\n    var sacrificialFrame;\n    var sacrificialFrameWin;\n    var cancel = function () {\n        var e_9, _a;\n        cancelled = true;\n        try {\n            for (var mutationObservers_1 = __values(mutationObservers), mutationObservers_1_1 = mutationObservers_1.next(); !mutationObservers_1_1.done; mutationObservers_1_1 = mutationObservers_1.next()) {\n                var observer = mutationObservers_1_1.value;\n                observer.disconnect();\n            }\n        }\n        catch (e_9_1) { e_9 = { error: e_9_1 }; }\n        finally {\n            try {\n                if (mutationObservers_1_1 && !mutationObservers_1_1.done && (_a = mutationObservers_1.return)) _a.call(mutationObservers_1);\n            }\n            finally { if (e_9) throw e_9.error; }\n        }\n        if (interval) {\n            interval.cancel();\n        }\n        if (sacrificialFrameWin) {\n            sacrificialFrameWin.removeEventListener('unload', elementClosed);\n        }\n        if (sacrificialFrame) {\n            destroyElement(sacrificialFrame);\n        }\n    };\n    var elementClosed = function () {\n        if (!cancelled) {\n            handler();\n            cancel();\n        }\n    };\n    if (isElementClosed(element)) {\n        elementClosed();\n        return { cancel: cancel };\n    }\n    if (window.MutationObserver) {\n        var mutationElement = element.parentElement;\n        while (mutationElement) {\n            var mutationObserver = new window.MutationObserver(function () {\n                if (isElementClosed(element)) {\n                    elementClosed();\n                }\n            });\n            mutationObserver.observe(mutationElement, { childList: true });\n            mutationObservers.push(mutationObserver);\n            mutationElement = mutationElement.parentElement;\n        }\n    }\n    sacrificialFrame = document.createElement('iframe');\n    sacrificialFrame.setAttribute('name', \"__detect_close_\" + uniqueID() + \"__\");\n    sacrificialFrame.style.display = 'none';\n    awaitFrameWindow(sacrificialFrame).then(function (frameWin) {\n        frameWin.addEventListener('unload', elementClosed);\n    });\n    element.appendChild(sacrificialFrame);\n    var check = function () {\n        if (isElementClosed(element)) {\n            elementClosed();\n        }\n    };\n    interval = safeInterval(check, 1000);\n    return { cancel: cancel };\n}\nexport function fixScripts(el, doc) {\n    var e_10, _a;\n    if (doc === void 0) { doc = window.document; }\n    try {\n        for (var _b = __values(querySelectorAll('script', el)), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var script = _c.value;\n            var parentNode = script.parentNode;\n            if (!parentNode) {\n                continue;\n            }\n            var newScript = doc.createElement('script');\n            newScript.text = script.textContent;\n            parentNode.replaceChild(newScript, script);\n        }\n    }\n    catch (e_10_1) { e_10 = { error: e_10_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_10) throw e_10.error; }\n    }\n}\nexport function onResize(el, handler, _a) {\n    var _b = _a === void 0 ? {} : _a, _c = _b.width, width = _c === void 0 ? true : _c, _d = _b.height, height = _d === void 0 ? true : _d, _e = _b.interval, interval = _e === void 0 ? 100 : _e, _f = _b.win, win = _f === void 0 ? window : _f;\n    var currentWidth = el.offsetWidth;\n    var currentHeight = el.offsetHeight;\n    var canceled = false;\n    handler({ width: currentWidth, height: currentHeight });\n    var check = function () {\n        if (canceled || !isElementVisible(el)) {\n            return;\n        }\n        var newWidth = el.offsetWidth;\n        var newHeight = el.offsetHeight;\n        if ((width && newWidth !== currentWidth) || (height && newHeight !== currentHeight)) {\n            handler({ width: newWidth, height: newHeight });\n        }\n        currentWidth = newWidth;\n        currentHeight = newHeight;\n    };\n    var observer;\n    var timeout;\n    win.addEventListener('resize', check);\n    if (typeof win.ResizeObserver !== 'undefined') {\n        observer = new win.ResizeObserver(check);\n        observer.observe(el);\n        timeout = safeInterval(check, interval * 10);\n    }\n    else if (typeof win.MutationObserver !== 'undefined') {\n        observer = new win.MutationObserver(check);\n        observer.observe(el, {\n            attributes: true,\n            childList: true,\n            subtree: true,\n            characterData: false\n        });\n        timeout = safeInterval(check, interval * 10);\n    }\n    else {\n        timeout = safeInterval(check, interval);\n    }\n    return {\n        cancel: function () {\n            canceled = true;\n            observer.disconnect();\n            window.removeEventListener('resize', check);\n            timeout.cancel();\n        }\n    };\n}\nexport function getResourceLoadTime(url) {\n    var performance = getPerformance();\n    if (!performance) {\n        return;\n    }\n    if (typeof performance.getEntries !== 'function') {\n        return;\n    }\n    var entries = performance.getEntries();\n    for (var i = 0; i < entries.length; i++) {\n        var entry = entries[i];\n        if (entry &&\n            entry.name &&\n            entry.name.indexOf(url) === 0 &&\n            typeof entry.duration === 'number') {\n            return Math.floor(entry.duration);\n        }\n    }\n}\nexport function isShadowElement(element) {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n    return element.toString() === '[object ShadowRoot]';\n}\nexport function getShadowRoot(element) {\n    while (element.parentNode) {\n        element = element.parentNode;\n    }\n    if (isShadowElement(element)) {\n        return element;\n    }\n}\nexport function getShadowHost(element) {\n    var shadowRoot = getShadowRoot(element);\n    if (shadowRoot.host) {\n        return shadowRoot.host;\n    }\n}\nexport function insertShadowSlot(element) {\n    var shadowHost = getShadowHost(element);\n    if (!shadowHost) {\n        throw new Error(\"Element is not in shadow dom\");\n    }\n    if (isShadowElement(shadowHost)) {\n        throw new Error(\"Host element is also in shadow dom\");\n    }\n    var slotName = \"shadow-slot-\" + uniqueID();\n    var slot = document.createElement('slot');\n    slot.setAttribute('name', slotName);\n    element.appendChild(slot);\n    var slotProvider = document.createElement('div');\n    slotProvider.setAttribute('slot', slotName);\n    shadowHost.appendChild(slotProvider);\n    return slotProvider;\n}\nexport function preventClickFocus(el) {\n    var onFocus = function (event) {\n        el.removeEventListener('focus', onFocus);\n        event.preventDefault();\n        el.blur();\n        return false;\n    };\n    el.addEventListener('mousedown', function () {\n        el.addEventListener('focus', onFocus);\n        setTimeout(function () {\n            el.removeEventListener('focus', onFocus);\n        }, 1);\n    });\n}\nexport function getStackTrace() {\n    try {\n        throw new Error('_');\n    }\n    catch (err) {\n        return err.stack || '';\n    }\n}\nfunction inferCurrentScript() {\n    var e_11, _a;\n    try {\n        var stack = getStackTrace();\n        var stackDetails = /.*at [^(]*\\((.*):(.+):(.+)\\)$/gi.exec(stack);\n        var scriptLocation = stackDetails && stackDetails[1];\n        if (!scriptLocation) {\n            return;\n        }\n        try {\n            for (var _b = __values(Array.prototype.slice\n                .call(document.getElementsByTagName('script'))\n                .reverse()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var script = _c.value;\n                if (script.src && script.src === scriptLocation) {\n                    return script;\n                }\n            }\n        }\n        catch (e_11_1) { e_11 = { error: e_11_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_11) throw e_11.error; }\n        }\n    }\n    catch (err) {\n    }\n}\nvar currentScript = typeof document !== 'undefined' ? document.currentScript : null;\nexport var getCurrentScript = memoize(function () {\n    if (currentScript) {\n        return currentScript;\n    }\n    currentScript = inferCurrentScript();\n    if (currentScript) {\n        return currentScript;\n    }\n    throw new Error('Can not determine current script');\n});\nvar currentUID = uniqueID();\nexport var getCurrentScriptUID = memoize(function () {\n    var script;\n    try {\n        script = getCurrentScript();\n    }\n    catch (err) {\n        return currentUID;\n    }\n    var uid = script.getAttribute(ATTRIBUTES.UID);\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n    uid = script.getAttribute(ATTRIBUTES.UID + \"-auto\");\n    if (uid && typeof uid === 'string') {\n        return uid;\n    }\n    uid = uniqueID();\n    script.setAttribute(ATTRIBUTES.UID + \"-auto\", uid);\n    return uid;\n});\n","import { __read, __values } from \"tslib\";\nvar HEADERS = {\n    CONTENT_TYPE: 'content-type',\n    ACCEPT: 'accept'\n};\nvar headerBuilders = [];\nfunction parseHeaders(rawHeaders) {\n    var e_1, _a;\n    if (rawHeaders === void 0) { rawHeaders = ''; }\n    var result = {};\n    try {\n        for (var _b = __values(rawHeaders.trim().split('\\n')), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var line = _c.value;\n            var _d = __read(line.split(':')), key = _d[0], values = _d.slice(1);\n            result[key.toLowerCase()] = values.join(':').trim();\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return result;\n}\nexport function request(_a) {\n    var url = _a.url, _b = _a.method, method = _b === void 0 ? 'get' : _b, _c = _a.headers, headers = _c === void 0 ? {} : _c, json = _a.json, data = _a.data, body = _a.body, _d = _a.timeout, timeout = _d === void 0 ? 0 : _d;\n    return new Promise(function (resolve, reject) {\n        var e_2, _a, e_3, _b, e_4, _c;\n        if ((json && data) || (json && body) || (data && json)) {\n            throw new Error(\"Only options.json or options.data or options.body should be passed\");\n        }\n        var normalizedHeaders = {};\n        try {\n            for (var _d = __values(Object.keys(headers)), _e = _d.next(); !_e.done; _e = _d.next()) {\n                var key = _e.value;\n                normalizedHeaders[key.toLowerCase()] = headers[key];\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_e && !_e.done && (_a = _d.return)) _a.call(_d);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        if (json) {\n            normalizedHeaders[HEADERS.CONTENT_TYPE] =\n                normalizedHeaders[HEADERS.CONTENT_TYPE] || 'application/json';\n        }\n        else if (data || body) {\n            normalizedHeaders[HEADERS.CONTENT_TYPE] =\n                normalizedHeaders[HEADERS.CONTENT_TYPE] ||\n                    'application/x-www-form-urlencoded; charset=utf-8';\n        }\n        normalizedHeaders[HEADERS.ACCEPT] = normalizedHeaders[HEADERS.ACCEPT] || 'application/json';\n        try {\n            for (var headerBuilders_1 = __values(headerBuilders), headerBuilders_1_1 = headerBuilders_1.next(); !headerBuilders_1_1.done; headerBuilders_1_1 = headerBuilders_1.next()) {\n                var headerBuilder = headerBuilders_1_1.value;\n                var builtHeaders = headerBuilder();\n                try {\n                    for (var _f = (e_4 = void 0, __values(Object.keys(builtHeaders))), _g = _f.next(); !_g.done; _g = _f.next()) {\n                        var key = _g.value;\n                        normalizedHeaders[key.toLowerCase()] = builtHeaders[key];\n                    }\n                }\n                catch (e_4_1) { e_4 = { error: e_4_1 }; }\n                finally {\n                    try {\n                        if (_g && !_g.done && (_c = _f.return)) _c.call(_f);\n                    }\n                    finally { if (e_4) throw e_4.error; }\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (headerBuilders_1_1 && !headerBuilders_1_1.done && (_b = headerBuilders_1.return)) _b.call(headerBuilders_1);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        var xhr = new XMLHttpRequest();\n        xhr.addEventListener('load', function xhrLoad() {\n            var responseHeaders = parseHeaders(this.getAllResponseHeaders());\n            if (!this.status) {\n                return reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" failed: no response status code.\"));\n            }\n            var contentType = responseHeaders['content-type'];\n            var isJSON = contentType &&\n                (contentType.indexOf('application/json') === 0 || contentType.indexOf('text/json') === 0);\n            var responseBody = this.responseText;\n            try {\n                responseBody = JSON.parse(responseBody);\n            }\n            catch (err) {\n                if (isJSON) {\n                    return reject(new Error(\"Invalid json: \" + this.responseText + \".\"));\n                }\n            }\n            var res = {\n                status: this.status,\n                headers: responseHeaders,\n                body: responseBody\n            };\n            return resolve(res);\n        }, false);\n        xhr.addEventListener('error', function (evt) {\n            reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" failed: \" + evt.toString() + \".\"));\n        }, false);\n        xhr.open(method, url, true);\n        for (var key in normalizedHeaders) {\n            if (normalizedHeaders.hasOwnProperty(key)) {\n                xhr.setRequestHeader(key, normalizedHeaders[key]);\n            }\n        }\n        if (json) {\n            body = JSON.stringify(json);\n        }\n        else if (data) {\n            body = Object.keys(data)\n                .map(function (key) {\n                return encodeURIComponent(key) + \"=\" + (data ? encodeURIComponent(data[key]) : '');\n            })\n                .join('&');\n        }\n        xhr.timeout = timeout;\n        xhr.ontimeout = function xhrTimeout() {\n            reject(new Error(\"Request to \" + method.toLowerCase() + \" \" + url + \" has timed out\"));\n        };\n        xhr.send(body);\n    });\n}\nexport function addHeaderBuilder(method) {\n    headerBuilders.push(method);\n}\n"],"names":["getUserAgent","window","navigator","userAgent","isOperaMini","ua","indexOf","isAndroid","test","isIos","isChrome","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","objectIDs","__assign","assign","t","s","i","n","arguments","length","apply","__values","o","Symbol","iterator","m","next","value","done","__read","r","e","ar","push","error","__spread","concat","getFunctionName","fn","name","__name__","displayName","setFunctionName","err","base64encode","str","btoa","encodeURIComponent","replace","p1","fromCharCode","parseInt","Buffer","from","toString","Error","uniqueID","chars","charAt","Math","floor","random","Date","toISOString","slice","toLowerCase","getObjectID","obj","WeakMap","uid","get","set","serializeArgs","args","JSON","stringify","subkey","val","getOrSet","weakMapOrObject","key","getter","isWK","isWeakMap","has","memoizeGlobalIndex","memoizeGlobalIndexValidFrom","memoize","method","options","simpleCache","thisCache","_a","thisNamespace","cacheTime","time","memoizeIndex","memoizedFunction","cache","_i","getEmptyObject","cacheKey","cacheResult","now","reset","inlineMemoize","logic","__inline_memoize_cache","noop","once","called","stringifyError","level","stack","message","newErr","item","extend","source","values","result","clear","memoizedValues","promisify","fnOrPromise","_this","isPromise","Promise","resolve","reject","results","safeInterval","timeout","loop","setTimeout","cancel","clearTimeout","isInteger","Boolean","match","isFloat","serializePrimitive","deserializePrimitive","parseFloat","capitalizeFirstLetter","string","toUpperCase","defineLazyProp","isArray","defineProperty","configurable","enumerable","arrayFrom","isObject","isObjectObject","isPlainObject","Window","toString_1","name_1","then","regex","pattern","start","RegExp","index","regmatch","text","groups","end","wk","ExtendableError","_super","captureStackTrace","KEY_CODES","ATTRIBUTES","urlEncode","isDocumentReady","document","body","readyState","isDocumentInteractive","waitForDocumentReady","interval","setInterval","clearInterval","parseQuery","queryString","e_1","params","_b","split","_c","pair","decodeURIComponent","e_1_1","return","formatQuery","keys","filter","map","join","extendQuery","originalQuery","props","isElementVisible","el","offsetWidth","offsetHeight","getClientRects","getPerformance","performance","timing","connectEnd","navigationStart","abs","querySelectorAll","selector","doc","appendChild","container","child","isElement","element","Element","nodeType","style","ownerDocument","getElementSafe","id","querySelector","getElement","awaitFrameLoadPromises","PopupOpenError","writeToWindow","win","html","open","write","close","location","err2","setStyle","styleText","styleSheet","cssText","createTextNode","awaitFrameLoad","frame","promise_1","promise","addEventListener","contentWindow","awaitFrameWindow","loadedFrame","createElement","tag","e_5","class","className","setAttribute","attributes","e_5_1","innerHTML","bindEvents","eventNames","handler","e_6","eventNames_1","eventNames_1_1","eventName","e_6_1","e_7","eventNames_2","eventNames_2_1","removeEventListener","e_7_1","VENDOR_PREFIXES","setVendorCSS","e_8","capitalizedName","VENDOR_PREFIXES_1","VENDOR_PREFIXES_1_1","prefix","e_8_1","ANIMATION_START_EVENTS","ANIMATION_END_EVENTS","animate","clean","startTimeout","endTimeout","startEvent","endEvent","hasStarted","cleanUp","event","target","animationName","stopPropagation","showElement","setProperty","hideElement","destroyElement","parentNode","removeChild","isElementClosed","documentElement","contains","isShadowElement","getShadowRoot","getShadowHost","shadowRoot","host","getStackTrace","currentScript","getCurrentScript","e_11","stackDetails","exec","scriptLocation","getElementsByTagName","reverse","script","src","e_11_1","inferCurrentScript","currentUID","getCurrentScriptUID","getAttribute","HEADERS","headerBuilders","classList","add","thing","atob","c","charCodeAt","g","cleanErr","tasks","cleaned","register","all","task","shift","constant","def","descriptor","getOwnPropertyDescriptor","cycle","seenErrors","seenStringifiedErrors","stringifiedError","hostname","domain","dotify","newobj","undefined","every","triggered","handlers","on","handlerList","cancelled","splice","listener","trigger","promises","_loop_1","handlerList_1","handlerList_1_1","triggerOnce","url","originalUrl","originalHash","query","hash","hashString","e_10","newScript","textContent","replaceChild","e_10_1","path","pathParts","nav","locales","languages","language","userLanguage","locale","lang","country","domInteractive","search","getEntries","entries","entry","duration","getScript","e_2","scripts","scripts_1","scripts_1_1","e_2_1","pow","sqrt","allowTransparency","backgroundColor","border","isIE","hasAttribute","shadowHost","slotName","slot","slotProvider","process","versions","electron","documentMode","mHttp","mContent","status_1","status","isLocalStorageEnabled","localStorage","setItem","getItem","removeItem","regx","regMatch","max","min","keyCode","width","_d","height","_e","_f","currentWidth","currentHeight","canceled","observer","check","newWidth","newHeight","ResizeObserver","observe","MutationObserver","childList","subtree","characterData","disconnect","original","context","callOriginal","pixels","percentage","round","top","left","outerWidth","screenX","screen","outerHeight","screenY","toolbar","menubar","resizable","scrollbars","closed","onFocus","preventDefault","blur","delay","catch","matches","regexp","token","remove","arr","replaceObject","replacer","fullKey","length_1","_loop_2","itemKey","_loop_3","headers","json","data","e_3","e_4","normalizedHeaders","headerBuilders_1","headerBuilders_1_1","builtHeaders","headerBuilder","_g","e_4_1","e_3_1","xhr","XMLHttpRequest","responseHeaders","rawHeaders","trim","parseHeaders","getAllResponseHeaders","contentType","isJSON","responseBody","responseText","parse","res","evt","setRequestHeader","ontimeout","send","num","nearest","remainder","animation","total","defaultMessage","svg","keyResult","parts","part","isLast","isIndex","arr_1","arr_1_1","waitForWindowReady","sacrificialFrame","mutationObservers","e_9","mutationObservers_1","mutationObservers_1_1","e_9_1","elementClosed","mutationElement","parentElement","mutationObserver","display","frameWin","weakmap","arg","finally","delete","tagName","children"],"mappings":"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"}